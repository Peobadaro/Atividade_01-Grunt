function calcularJurosCompostos(e,a,t,o=0){t*=12,a=a/100/12;let r=e*Math.pow(1+a,t);return 0<o&&(e=o*((Math.pow(1+a,t)-1)/a),r+=e),r}function calcularJurosSimples(e,a,t,o=0){let r=e+e*(a/100)*t;return 0<o&&(r+=o*(12*t)),r}function ajustarPelaInflacao(e,a,t){return e/Math.pow(1+a/100,t)}function calcularJurosCompostos(e,a,t,o=0){t*=12,a=a/100/12;let r=e*Math.pow(1+a,t);return 0<o&&(e=o*((Math.pow(1+a,t)-1)/a),r+=e),r}function calcularJurosSimples(e,a,t,o=0){let r=e+e*(a/100)*t;return 0<o&&(r+=o*(12*t)),r}function ajustarPelaInflacao(e,a,t){return e/Math.pow(1+a/100,t)}function formatarComoPorcentagem(e){var a=e.value.replace("%","").replace(",","."),a=parseFloat(a);isNaN(a)?e.value="":e.value=a.toFixed(2)+"%"}function limparPorcentagem(e){e=e.value.replace("%","").replace(",",".");return parseFloat(e)}function gerarGrafico(a,t,o,r,l){var e=document.getElementById("investmentChart").getContext("2d"),n=Array.from({length:a},(e,a)=>a+1),c=[],u=[];for(let e=0;e<a;e++){var s=e+1,d=calcularJurosCompostos(t,o,s,r),s=calcularJurosSimples(t,o,s,r);c.push(d),u.push(s)}var i=c.map(e=>ajustarPelaInflacao(e,l,a)),m=u.map(e=>ajustarPelaInflacao(e,l,a));new Chart(e,{type:"line",data:{labels:n,datasets:[{label:"Crescimento do Investimento (Composto)",data:c,borderColor:"rgba(75, 192, 192, 1)",borderWidth:2,backgroundColor:"rgba(75, 192, 192, 0.2)"},{label:"Crescimento do Investimento (Simples)",data:u,borderColor:"rgba(255, 99, 132, 1)",borderWidth:2,backgroundColor:"rgba(255, 99, 132, 0.2)"},{label:"Montante Ajustado pela Inflação (Composto)",data:i,borderColor:"rgba(54, 162, 235, 1)",borderWidth:2,borderDash:[5,5],backgroundColor:"rgba(54, 162, 235, 0.2)"},{label:"Montante Ajustado pela Inflação (Simples)",data:m,borderColor:"rgba(255, 206, 86, 1)",borderWidth:2,borderDash:[5,5],backgroundColor:"rgba(255, 206, 86, 0.2)"}]},options:{responsive:!0,scales:{y:{beginAtZero:!0,ticks:{color:"black"}},x:{ticks:{color:"black"}}},plugins:{legend:{labels:{color:"black"}}}}})}document.getElementById("investment-form").addEventListener("submit",function(e){e.preventDefault();var e=parseFloat(document.getElementById("valorInicial").value),a=document.getElementById("taxaDeJuros"),t=document.getElementById("taxaDeInflacao"),a=limparPorcentagem(a),t=limparPorcentagem(t),o=parseFloat(document.getElementById("anos").value),r=parseFloat(document.getElementById("depositoMensal").value)||0,l=document.getElementById("tipoDeInvestimento").value;let n;n=("composto"===l?calcularJurosCompostos:calcularJurosSimples)(e,a,o,r);var l=ajustarPelaInflacao(n,t,o),c=n.toLocaleString("pt-BR",{style:"currency",currency:"BRL"}),l=l.toLocaleString("pt-BR",{style:"currency",currency:"BRL"});document.getElementById("resultado-final").innerText=c,document.getElementById("resultado-inflacao").innerText=l,document.querySelector(".resultado").style.display="block",document.querySelector(".text-grafico").style.display="block",gerarGrafico(o,e,a,r,t)}),document.getElementById("taxaDeJuros").addEventListener("focus",function(){this.value=this.value.replace("%","")}),document.getElementById("taxaDeInflacao").addEventListener("focus",function(){this.value=this.value.replace("%","")});